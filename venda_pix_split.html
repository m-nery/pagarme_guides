<div class="container mx-auto p-4 md:p-8 max-w-4xl">

    <header class="text-center mb-12">
        <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Guia de Integração: Venda com Pix e Split</h1>
        <p class="mt-4 text-lg text-gray-600">Um guia do fluxo da API para uma transação Pix com divisão de valores.</p>
        <p class="mt-4 text-sm text-gray-500">Para detalhes completos, consulte a <a href="https://docs.pagar.me/reference/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline font-medium">documentação oficial da Pagar.me</a>.</p>
    </header>

    <div class="space-y-8">

        <!-- Step 1: Recebedores -->
        <div class="step-card bg-white p-4 md:p-6 rounded-xl shadow-sm">
            <div class="flex items-center mb-4">
                <div class="bg-indigo-100 text-indigo-700 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg">1</div>
                <h2 class="text-lg md:text-xl font-semibold ml-4">Criação dos Recebedores</h2>
            </div>
            <div class="border-b border-gray-200 mb-4">
                <nav class="flex flex-wrap space-x-2" data-step="1">
                    <button class="tab tab-active py-2 px-4 rounded-t-lg font-medium" data-tab="explanation">Explicação</button>
                    <button class="tab py-2 px-4 rounded-t-lg font-medium" data-tab="request">Requisição</button>
                </nav>
            </div>
            <div>
                <div class="tab-content" data-step="1" data-tab="explanation">
                    <p>O primeiro passo é cadastrar os recebedores (sellers) que participarão da divisão. O `recipient_id` retornado será usado na criação do pedido.</p>
                    <p class="mt-4 text-sm"><strong>Link da documentação:</strong> <a href="https://docs.pagar.me/reference/criar-recebedor-1" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">https://docs.pagar.me/reference/criar-recebedor-1</a></p>
                </div>
                <div class="tab-content hidden" data-step="1" data-tab="request">
                    <div class="code-block"><span class="curl-command">curl</span> --request POST \
--url https://api.pagar.me/core/v5/recipients \
--header <span class="curl-header">'Authorization: Basic c2tfdGVzdF9zbGl0ZXhhbXBsZTo='</span> \
--header <span class="curl-header">'Content-Type: application/json'</span> \
--data '
{
  "name": "Stark Industries",
  "email": "seller@stark.com",
  "document": "26224451990",
  "type": "individual",
  "default_bank_account": {
      "holder_name": "Tony Stark",
      "holder_type": "individual",
      "holder_document": "26224451990",
      "bank": "341",
      "branch_number": "1234",
      "account_number": "12345",
      "account_check_digit": "6",
      "type": "checking"
  }
}
'</div>
                </div>
            </div>
        </div>
        
        <!-- Step 2: Cliente -->
        <div class="step-card bg-white p-4 md:p-6 rounded-xl shadow-sm">
            <div class="flex items-center mb-4">
                <div class="bg-indigo-100 text-indigo-700 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg">2</div>
                <h2 class="text-lg md:text-xl font-semibold ml-4">Cadastro do Cliente</h2>
            </div>
             <div class="border-b border-gray-200 mb-4">
                <nav class="flex flex-wrap space-x-2" data-step="2">
                    <button class="tab tab-active py-2 px-4 rounded-t-lg font-medium" data-tab="explanation">Explicação</button>
                    <button class="tab py-2 px-4 rounded-t-lg font-medium" data-tab="request">Requisição</button>
                </nav>
            </div>
            <div>
                <div class="tab-content" data-step="2" data-tab="explanation">
                    <p>Cadastre o cliente que fará a compra. O `customer_id` retornado será usado no pedido.</p>
                     <p class="mt-4 text-sm"><strong>Link da documentação:</strong> <a href="https://docs.pagar.me/reference/criar-cliente-1" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">https://docs.pagar.me/reference/criar-cliente-1</a></p>
                </div>
                <div class="tab-content hidden" data-step="2" data-tab="request">
                    <div class="code-block"><span class="curl-command">curl</span> --request POST \
--url https://api.pagar.me/core/v5/customers \
--header <span class="curl-header">'Authorization: Basic c2tfdGVzdF9zbGl0ZXhhbXBsZTo='</span> \
--header <span class="curl-header">'Content-Type: application/json'</span> \
--data '
{
  "name": "Steve Rogers",
  "email": "captain@avengers.com",
  "document": "27256221034",
  "type": "individual"
}
'</div>
                </div>
            </div>
        </div>

        <!-- Step 3: Pedido com Pix e Split -->
        <div class="step-card bg-white p-4 md:p-6 rounded-xl shadow-sm">
            <div class="flex items-center mb-4">
                <div class="bg-indigo-100 text-indigo-700 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg">3</div>
                <h2 class="text-lg md:text-xl font-semibold ml-4">Criação do Pedido com Pix e Split</h2>
            </div>
             <div class="border-b border-gray-200 mb-4">
                <nav class="flex flex-wrap space-x-2" data-step="3">
                    <button class="tab tab-active py-2 px-4 rounded-t-lg font-medium" data-tab="explanation">Explicação</button>
                    <button class="tab py-2 px-4 rounded-t-lg font-medium" data-tab="request">Requisição</button>
                    <button class="tab py-2 px-4 rounded-t-lg font-medium" data-tab="response">Resposta</button>
                </nav>
            </div>
            <div>
                <div class="tab-content" data-step="3" data-tab="explanation">
                    <p>Crie o pedido com o método de pagamento `pix` e inclua o objeto `split` para definir a divisão de valores.</p>
                    <p class="mt-4 text-sm"><strong>Link da documentação:</strong> <a href="https://docs.pagar.me/reference/criar-pedido" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">https://docs.pagar.me/reference/criar-pedido</a></p>
                </div>
                <div class="tab-content hidden" data-step="3" data-tab="request">
                    <div class="code-block"><span class="curl-command">curl</span> --request POST \
--url https://api.pagar.me/core/v5/orders \
--header <span class="curl-header">'Authorization: Basic c2tfdGVzdF9zbGl0ZXhhbXBsZTo='</span> \
--header <span class="curl-header">'Content-Type: application/json'</span> \
--data '
{
  "customer_id": "<span class="highlight">cus_xxxxxxxxxxxxxxxx</span>",
  "items": [{ "amount": 20000, "description": "Item com Split", "quantity": 1 }],
  "payments": [{
    "payment_method": "pix",
    "pix": { "expires_in": 3600 },
    "split": [
      { "amount": 18000, "recipient_id": "<span class="highlight">re_xxxxxxxxxxxxxxxx1</span>", "type": "flat", "options": { "charge_processing_fee": true, "liable": true }},
      { "amount": 2000, "recipient_id": "<span class="highlight">re_xxxxxxxxxxxxxxxx2</span>", "type": "flat", "options": { "charge_processing_fee": false, "liable": false }}
    ]
  }]
}
'</div>
                </div>
                <div class="tab-content hidden" data-step="3" data-tab="response">
                    <div class="code-block">{
  "id": "or_xxxxxxxxxxxxxxxx",
  "status": "pending",
  "charges": [{
    "id": "<span class="highlight">ch_xxxxxxxxxxxxxxxx</span>",
    "status": "pending",
    "last_transaction": {
      "qr_code": "<span class="highlight">00020126...</span>",
      "qr_code_url": "https://api.pagar.me/pix/qr_code.png",
      "expires_at": "2025-09-16T15:57:00Z"
    }
  }]
}</div>
                </div>
            </div>
        </div>

        <!-- Step 4: Webhooks -->
        <div class="step-card bg-white p-4 md:p-6 rounded-xl shadow-sm">
            <div class="flex items-center mb-4">
                <div class="bg-indigo-100 text-indigo-700 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg">4</div>
                <h2 class="text-lg md:text-xl font-semibold ml-4">Confirmação via Webhook</h2>
            </div>
             <div class="border-b border-gray-200 mb-4">
                <nav class="flex flex-wrap space-x-2" data-step="4">
                    <button class="tab tab-active py-2 px-4 rounded-t-lg font-medium" data-tab="explanation">Explicação</button>
                    <button class="tab py-2 px-4 rounded-t-lg font-medium" data-tab="response">Exemplo de Payload</button>
                </nav>
            </div>
            <div>
                <div class="tab-content" data-step="4" data-tab="explanation">
                    <p>O pagamento Pix é assíncrono. Para confirmar que o pagamento foi realizado, você deve configurar um webhook e aguardar o evento <strong>charge.paid</strong>.</p>
                     <p class="mt-4 text-sm"><strong>Link da documentação:</strong> <a href="https://docs.pagar.me/docs/conceitos-importantes-sobre-webhooks" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">https://docs.pagar.me/docs/conceitos-importantes-sobre-webhooks</a></p>
                </div>
                <div class="tab-content hidden" data-step="4" data-tab="response">
                    <div class="code-block">{
  "type": "charge.paid",
  "data": {
    "id": "<span class="highlight">ch_xxxxxxxxxxxxxxxx</span>",
    "status": "paid",
    "amount": 20000
  }
}</div>
                </div>
            </div>
        </div>

    </div>
</div>
