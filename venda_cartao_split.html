<div class="container mx-auto p-4 md:p-8 max-w-4xl">

    <header class="text-center mb-12">
        <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Fluxo de venda: Cartão de Crédito com Split</h1>
        <p class="mt-4 text-lg text-gray-600">Um guia simples do fluxo da API Pagar.me para uma transação de cartão com divisão de valores entre recebedores.</p>
         <p class="mt-4 text-sm text-gray-500">Para detalhes completos sobre cada endpoint, consulte a <a href="https://docs.pagar.me/reference/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline font-medium">documentação oficial da Pagar.me</a>.</p>
    </header>

    <div class="space-y-8">

        <!-- Step 1 -->
        <div id="step-1" class="step-card bg-white p-4 md:p-6 rounded-xl shadow-sm">
            <div class="flex items-center mb-4">
                <div class="bg-indigo-100 text-indigo-700 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">1</div>
                <h2 class="text-lg md:text-xl font-semibold ml-4 text-gray-800">Criação dos Recebedores</h2>
            </div>
            <div class="border-b border-gray-200 mb-4">
                <nav class="flex flex-wrap space-x-2" data-step="1">
                    <button class="tab tab-active py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="explanation">Explicação</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="request">Requisição</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="response">Resposta</button>
                </nav>
            </div>
            <div class="content-container">
                <div class="tab-content" data-step="1" data-tab="explanation">
                    <p>O primeiro passo é cadastrar os recebedores (sellers) que participarão da divisão de valores. Sua conta Pagar.me já possui um recebedor principal que será usado para representar o marketplace na regra de Split. Você pode verificar esse recebedor na dashboard Pagar.me no menu Recebedores. O recipient_id` retornado será usado na criação do pedido.</p>
                    <p style="margin-top: 1em;">Uma observação importante: o documento do recebedor deverá ser igual ao documento da conta bancária, ou seja, só será permito transfência de valores para contas bancárias vinculadas ao CPF/CNPJ do recebedor. </p>
                    <p class="mt-4 text-sm"><strong>Link da documentação:</strong> <a href="https://docs.pagar.me/reference/criar-recebedor-1" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">https://docs.pagar.me/reference/criar-recebedor-1</a></p>
                </div>
                <div class="tab-content hidden" data-step="1" data-tab="request">
                    <div class="code-block" id="request-1"><span class="curl-command">curl</span> --request POST \
--url https://api.pagar.me/core/v5/recipients \
--header <span class="curl-header">'Authorization: Basic c2tfdGVzdF9zbGl0ZXhhbXBsZTo='</span> \
--header <span class="curl-header">'Content-Type: application/json'</span> \
--data '
{
  "register_information": {
    "phone_numbers": [
      {
        "ddd": "21",
        "number": "994647568",
        "type": "mobile"
      }
    ],
    "main_address": {
      "street": "Av. General Justo",
      "complementary": "Bloco A",
      "street_number": "375",
      "neighborhood": "Centro",
      "city": "Rio de Janeiro",
      "state": "RJ",
      "zip_code": "20021130",
      "reference_point": "Ao lado da banca de jornal"
    },
    "company_name": "Recebedor pessoa juridica",
    "trading_name": "Empresa LTDA",
    "email": "empresax@avengers.com",
    "document": "77699131000133",
    "type": "corporation",
    "site_url": "http://www.site.com",
    "annual_revenue": 1000000,
    "corporation_type": "LTDA",
    "founding_date": "2010-10-30",
    "managing_partners": [
      {
        "name": "Tony Stark",
        "email": "tstark@avengers.com",
        "document": "26224451990",
        "type": "individual",
        "mother_name": "Nome da mae",
        "birthdate": "12/10/1995",
        "monthly_income": 120000,
        "professional_occupation": "Vendedor",
        "self_declared_legal_representative": true,
        "address": {
          "street": "Av. General Justo",
          "complementary": "Bloco A",
          "street_number": "375",
          "neighborhood": "Centro",
          "city": "Rio de Janeiro",
          "state": "RJ",
          "zip_code": "20021130",
          "reference_point": "Ao lado da banca de jornal"
        },
        "phone_numbers": [
          {
            "ddd": "27",
            "number": "999992628",
            "type": "mobile"
          }
        ]
      }
    ]
  },
  "default_bank_account": {
    "holder_name": "Tony Stark",
    "holder_type": "company",
    "holder_document": "77699131000133",
    "bank": "341",
    "branch_number": "1234",
    "branch_check_digit": "6",
    "account_number": "12345",
    "account_check_digit": "6",
    "type": "checking"
  },
  "transfer_settings": {
    "transfer_enabled": "false",
    "transfer_interval": "Daily",
    "transfer_day": 0
  },
  "automatic_anticipation_settings": {
    "enabled": "true",
    "type": "1025",
    "volume_percentage": "100",
    "delay": "29"
  },
  "code": "industrias stark"
}
'</div>
                </div>
                <div class="tab-content hidden" data-step="1" data-tab="response">
                    <div class="code-block" id="response-1">{
  "id": "<span class="highlight">re_xxxxxxxxxxxxxxxx</span>",
  "name": "Stark Industries",
  "status": "active"
}</div>
                </div>
            </div>
        </div>
        
        <!-- Step 2 -->
        <div id="step-2" class="step-card bg-white p-4 md:p-6 rounded-xl shadow-sm">
            <div class="flex items-center mb-4">
                <div class="bg-indigo-100 text-indigo-700 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">2</div>
                <h2 class="text-lg md:text-xl font-semibold ml-4 text-gray-800">Cadastro do Cliente</h2>
            </div>
            <div class="border-b border-gray-200 mb-4">
                <nav class="flex flex-wrap space-x-2" data-step="2">
                    <button class="tab tab-active py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="explanation">Explicação</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="request">Requisição</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="response">Resposta</button>
                </nav>
            </div>
            <div class="content-container">
                <div class="tab-content" data-step="2" data-tab="explanation">
                    <p>O próximo passo é cadastrar o cliente que fará a compra. O `customer_id` retornado será usado nas próximas etapas.</p>
                    <p class="mt-4 text-sm"><strong>Link da documentação:</strong> <a href="https://docs.pagar.me/reference/criar-cliente-1" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">https://docs.pagar.me/reference/criar-cliente-1</a></p>
                </div>
                <div class="tab-content hidden" data-step="2" data-tab="request">
                    <div class="code-block" id="request-2"><span class="curl-command">curl</span> --request POST \
--url https://api.pagar.me/core/v5/customers \
--header <span class="curl-header">'Authorization: Basic c2tfdGVzdF9zbGl0ZXhhbXBsZTo='</span> \
--header <span class="curl-header">'Content-Type: application/json'</span> \
--data '
{
  "name": "Steve Rogers",
  "email": "captain@avengers.com",
  "document": "27256221034",
  "type": "individual",
  "address": {
    "line_1": "569, Lefferts Place, Brooklyn",
    "line_2": "Apt 4",
    "zip_code": "11238",
    "city": "New York",
    "state": "NY",
    "country": "US"
  },
  "phones": {
    "home_phone": {
      "country_code": "1",
      "number": "5551234",
      "area_code": "718"
    }
  }
}
'</div>
                </div>
                <div class="tab-content hidden" data-step="2" data-tab="response">
                    <div class="code-block" id="response-2">{
  "id": "<span class="highlight">cus_xxxxxxxxxxxxxxxx</span>",
  "name": "Steve Rogers",
  "status": "active"
}</div>
                </div>
            </div>
        </div>

        <!-- Step 3 -->
        <div id="step-3" class="step-card bg-white p-4 md:p-6 rounded-xl shadow-sm">
             <div class="flex items-center mb-4">
                <div class="bg-indigo-100 text-indigo-700 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">3</div>
                <h2 class="text-lg md:text-xl font-semibold ml-4 text-gray-800">Criação do Token do Cartão</h2>
            </div>
             <div class="border-b border-gray-200 mb-4">
                <nav class="flex flex-wrap space-x-2" data-step="3">
                    <button class="tab tab-active py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="explanation">Explicação</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="request">Requisição</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="response">Resposta</button>
                </nav>
            </div>
            <div class="content-container">
                <div class="tab-content" data-step="3" data-tab="explanation">
                    <p>Esta etapa é executada no front-end da sua aplicação (por exemplo, no navegador do cliente), usando sua <strong>chave pública (`public_key`)</strong> para garantir que os dados sensíveis do cartão não passem pelo seu servidor.</p>
                    <p style="margin-top: 1em;">O card token gerado tem validade de um minuto e é limitado a um uso único.</p>
                    <p class="mt-4 text-sm"><strong>Link da documentação:</strong> <a href="https://docs.pagar.me/reference/criar-token-cart%C3%A3o-1" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">https://docs.pagar.me/reference/criar-token-cartão-1</a></p>
                </div>
                <div class="tab-content hidden" data-step="3" data-tab="request">
                    <div class="code-block" id="request-3"><span class="curl-command">curl</span> --request POST \
--url https://api.pagar.me/core/v5/tokens \
--header <span class="curl-header">'Authorization: Basic cGtfdGVzdF9zbGl0ZXhhbXBsZTo='</span> \
--header <span class="curl-header">'Content-Type: application/json'</span> \
--data '
{
  "type": "card",
  "card": {
    "number": "4242424242424242",
    "holder_name": "Steve Rogers",
    "exp_month": 12,
    "exp_year": 2030,
    "cvv": "123"
  }
}
'</div>
                </div>
                <div class="tab-content hidden" data-step="3" data-tab="response">
                    <div class="code-block" id="response-3">{
  "id": "<span class="highlight">token_xxxxxxxxxxxxxxxx</span>",
  "type": "card"
}</div>
                </div>
            </div>
        </div>

        <!-- Step 4 -->
        <div id="step-4" class="step-card bg-white p-4 md:p-6 rounded-xl shadow-sm">
             <div class="flex items-center mb-4">
                <div class="bg-indigo-100 text-indigo-700 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">4</div>
                <h2 class="text-lg md:text-xl font-semibold ml-4 text-gray-800">Criação do Cartão a partir do Token</h2>
            </div>
             <div class="border-b border-gray-200 mb-4">
                <nav class="flex flex-wrap space-x-2" data-step="4">
                    <button class="tab tab-active py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="explanation">Explicação</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="request">Requisição</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="response">Resposta</button>
                </nav>
            </div>
            <div class="content-container">
                <div class="tab-content" data-step="4" data-tab="explanation">
                    <p>No seu back-end, use o `customer_id` (do Passo 2) e o `token` (do Passo 3) para salvar o cartão de forma segura no cofre da Pagar.me.</p>
                    <p class="mt-4 text-sm"><strong>Link da documentação:</strong> <a href="https://docs.pagar.me/reference/criar-cartao" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">https://docs.pagar.me/reference/criar-cartao</a></p>
                </div>
                <div class="tab-content hidden" data-step="4" data-tab="request">
                    <div class="code-block" id="request-4"><span class="curl-command">curl</span> --request POST \
--url https://api.pagar.me/core/v5/customers/<span class="highlight">cus_xxxxxxxxxxxxxxxx</span>/cards \
--header <span class="curl-header">'Authorization: Basic c2tfdGVzdF9zbGl0ZXhhbXBsZTo='</span> \
--header <span class="curl-header">'Content-Type: application/json'</span> \
--data '
{
  "token": "<span class="highlight">token_xxxxxxxxxxxxxxxx</span>",
  "billing_address": {
    "line_1": "375, Av. General Osorio, Centro",
    "line_2": "7º Andar",
    "zip_code": "220000111",
    "city": "Rio de Janeiro",
    "state": "RJ",
    "country": "BR"
  }
}
'</div>
                </div>
                <div class="tab-content hidden" data-step="4" data-tab="response">
                    <div class="code-block" id="response-4">{
  "id": "<span class="highlight">card_xxxxxxxxxxxxxxxx</span>",
  "last_four_digits": "4242",
  "status": "active"
}</div>
                </div>
            </div>
        </div>
        
        <!-- Step 5 -->
        <div id="step-5" class="step-card bg-white p-4 md:p-6 rounded-xl shadow-sm">
             <div class="flex items-center mb-4">
                <div class="bg-indigo-100 text-indigo-700 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">5</div>
                <h2 class="text-lg md:text-xl font-semibold ml-4 text-gray-800">Criação de um Pedido com Split</h2>
            </div>
             <div class="border-b border-gray-200 mb-4">
                <nav class="flex flex-wrap space-x-2" data-step="5">
                    <button class="tab tab-active py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="explanation">Explicação</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="request">Requisição</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="response">Resposta</button>
                </nav>
            </div>
            <div class="content-container">
                <div class="tab-content" data-step="5" data-tab="explanation">
                    <p>Ao criar o pedido, inclua o objeto `split` para definir como o valor da transação será dividido entre os recebedores (o seu marketplace e o seller).</p>
                    <p class="mt-4 text-sm"><strong>Link da documentação:</strong> <a href="https://docs.pagar.me/reference/criar-pedido" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">https://docs.pagar.me/reference/criar-pedido</a></p>
                </div>
                <div class="tab-content hidden" data-step="5" data-tab="request">
                    <div class="code-block" id="request-5"><span class="curl-command">curl</span> --request POST \
--url https://api.pagar.me/core/v5/orders \
--header <span class="curl-header">'Authorization: Basic c2tfdGVzdF9zbGl0ZXhhbXBsZTo='</span> \
--header <span class="curl-header">'Content-Type: application/json'</span> \
--data '
{
  "customer_id": "<span class="highlight">cus_xxxxxxxxxxxxxxxx</span>",
  "items": [
    {
      "amount": 20000,
      "description": "Item com Split",
      "quantity": 1,
      "code": "ITEM-SPLIT-01"
    }
  ],
  "payments": [
    {
      "payment_method": "credit_card",
      "credit_card": {
        "installments": 1,
        "capture": true,
        "card_id": "<span class="highlight">card_MrG1rwXh9hbjmBAn</span>"
      },
      "split": [
          {
              "amount": 18000,
              "recipient_id": "<span class="highlight">re_xxxxxxxxxxxxxxxx1</span>",
              "type": "flat",
              "options": {
                  "charge_processing_fee": true,
                  "charge_remainder_fee": true,
                  "liable": true
              }
          },
          {
              "amount": 2000,
              "recipient_id": "<span class="highlight">re_xxxxxxxxxxxxxxxx2</span>",
              "type": "flat",
              "options": {
                  "charge_processing_fee": false,
                  "charge_remainder_fee": false,
                  "liable": false
              }
          }
      ]
    }
  ]
}
'</div>
                </div>
                <div class="tab-content hidden" data-step="5" data-tab="response">
                    <div class="code-block" id="response-5">{
  "id": "or_xxxxxxxxxxxxxxxx",
  "status": "paid",
  "charges": [
    {
      "id": "<span class="highlight">ch_xxxxxxxxxxxxxxxx</span>",
      "amount": 20000,
      "status": "paid"
    }
  ]
}</div>
                </div>
            </div>
        </div>

        <!-- Step 6 -->
        <div id="step-6" class="step-card bg-white p-4 md:p-6 rounded-xl shadow-sm">
             <div class="flex items-center mb-4">
                <div class="bg-indigo-100 text-indigo-700 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">6</div>
                <h2 class="text-lg md:text-xl font-semibold ml-4 text-gray-800">Cancelamento da Cobrança</h2>
            </div>
             <div class="border-b border-gray-200 mb-4">
                <nav class="flex flex-wrap space-x-2" data-step="6">
                    <button class="tab tab-active py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="explanation">Explicação</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="request">Requisição</button>
                    <button class="tab py-2 px-3 sm:px-4 rounded-t-lg font-medium text-sm sm:text-base" data-tab="response">Resposta</button>
                </nav>
            </div>
            <div class="content-container">
                <div class="tab-content" data-step="6" data-tab="explanation">
                    <p>Por fim, se necessário, cancele a cobrança (estorno) usando o `charge_id` retornado no passo anterior. É possível realizar um estorno <strong>parcial</strong> (enviando o `amount`) ou <strong>total</strong> (omitindo o `amount`).</p>
                    <p class="mt-4 text-sm"><strong>Link da documentação:</strong> <a href="https://docs.pagar.me/reference/cancelar-uma-cobran%C3%A7a" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">https://docs.pagar.me/reference/cancelar-uma-cobrança</a></p>
                </div>
                <div class="tab-content hidden" data-step="6" data-tab="request">
                    <div class="code-block" id="request-6"><span class="curl-command">curl</span> --request DELETE \
--url https://api.pagar.me/core/v5/charges/<span class="highlight">ch_xxxxxxxxxxxxxxxx</span> \
--header <span class="curl-header">'Authorization: Basic c2tfdGVzdF9zbGl0ZXhhbXBsZTo='</span> \
--header <span class="curl-header">'Content-Type: application/json'</span> \
--data '
{
  "amount": 20000
}
'</div>
                </div>
                <div class="tab-content hidden" data-step="6" data-tab="response">
                    <div class="code-block" id="response-6">{
  "id": "<span class="highlight">ch_xxxxxxxxxxxxxxxx</span>",
  "amount": 20000,
  "status": "canceled"
}</div>
                </div>
            </div>
        </div>

    </div>
</div>



